(function(t){function e(e){for(var s,i,c=e[0],r=e[1],l=e[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,c=1;c<n.length;c++){var r=n[c];0!==o[r]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/task-manager/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},3411:function(t,e,n){},"41d9":function(t,e,n){},"4a58":function(t,e,n){},5485:function(t,e,n){"use strict";var s=n("41d9"),o=n.n(s);o.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("main",{staticClass:"main"},[n("router-view")],1)])},a=[],i={name:"App",components:{}},c=i,r=(n("cf25"),n("2877")),l=Object(r["a"])(c,o,a,!1,null,null,null),u=l.exports,d=(n("4de4"),n("7db0"),n("d81d"),n("2f62"));s["a"].use(d["a"]);var f=new d["a"].Store({state:{idCounter:localStorage.getItem("id-counter")||1,notes:localStorage.getItem("notes")?JSON.parse(localStorage.getItem("notes")):[]},getters:{getNoteList:function(t){return t.notes},getNote:function(t){return function(e){return t.notes.find((function(t){return t.id==e}))}}},mutations:{deleteNote:function(t,e){t.notes=t.notes.filter((function(t){return t.id!=e})),localStorage.setItem("notes",JSON.stringify(t.notes))},updateNoteList:function(t,e){e.id?t.notes=t.notes.map((function(t){return t.id==e.id?e.note:t})):(t.notes.push(Object.assign({id:t.idCounter},e.note)),localStorage.setItem("id-counter",++t.idCounter)),localStorage.setItem("notes",JSON.stringify(t.notes))}},actions:{},modules:{}}),p=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index-page"},[n("span",{staticClass:"page-title"},[t._v("Все заметки")]),n("router-link",{staticClass:"index-page__create-link",attrs:{to:{name:"create"}}},[t._v("Создать заметку")]),n("div",{staticClass:"index-page__notes"},t._l(t.notes,(function(t){return n("note-card",{staticClass:"index-page__note",attrs:{note:t}})})),1)],1)},h=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"note note--static"},[n("div",{staticClass:"note__manage-panel"},[n("div",{staticClass:"note__manage-panel-left"}),n("div",{staticClass:"note__manage-panel-right"},[n("icon-button",{attrs:{"icon-class":"fas fa-pencil-alt",title:"Редактировать",color:"handle"},on:{click:function(e){return t.$router.push({name:"edit",params:{id:t.note.id}})}}}),n("icon-button",{attrs:{"icon-class":"fas fa-trash",title:"Удалить",color:"error"},on:{click:t.deleteNote}})],1)]),n("div",{staticClass:"note__title"},[n("span",{staticClass:"note__title-label"},[t._v(t._s(t.note.title))])]),n("div",{staticClass:"note__tasks"},[0==t.note.tasks.length?n("div",{staticClass:"note__tasks-placeholder"},[t._v(" У заметки нет задач. ")]):t.note.tasks.length<=3?n("div",{staticClass:"note__tasks-container"},t._l(t.note.tasks,(function(e,s){return n("div",{staticClass:"note__task"},[n("custom-checkbox",{attrs:{disabled:""},model:{value:e.done,callback:function(n){t.$set(e,"done",n)},expression:"task.done"}}),n("span",{staticClass:"note__task-title"},[t._v(t._s(e.title))])],1)})),0):n("div",{staticClass:"note__tasks-container"},[t._l(3,(function(e){return n("div",{staticClass:"note__task"},[n("custom-checkbox",{attrs:{disabled:""},model:{value:t.note.tasks[e-1].done,callback:function(n){t.$set(t.note.tasks[e-1],"done",n)},expression:"note.tasks[i-1].done"}}),n("span",{staticClass:"note__task-title"},[t._v(t._s(t.note.tasks[e-1].title))])],1)})),t._v(" ... ")],2)])])},v=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"icon-button",attrs:{type:t.type,title:t.title},on:{click:function(e){return t.$emit("click")}}},[n("i",{staticClass:"icon-button__icon",class:[t.iconClass,t.color?"icon-button__icon--"+t.color:""]})])},g=[],k={name:"IconButton",props:{iconClass:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"button"},color:{type:String,default:""}}},y=k,C=(n("87a4"),Object(r["a"])(y,b,g,!1,null,null,null)),x=C.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"custom-checkbox",class:{"custom-checkbox--disabled":t.disabled},attrs:{title:t.title}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.tValue,expression:"tValue"}],staticClass:"custom-checkbox__input",attrs:{disabled:t.disabled,type:"checkbox"},domProps:{checked:Array.isArray(t.tValue)?t._i(t.tValue,null)>-1:t.tValue},on:{change:function(e){var n=t.tValue,s=e.target,o=!!s.checked;if(Array.isArray(n)){var a=null,i=t._i(n,a);s.checked?i<0&&(t.tValue=n.concat([a])):i>-1&&(t.tValue=n.slice(0,i).concat(n.slice(i+1)))}else t.tValue=o}}}),n("span",{staticClass:"custom-checkbox__box"},[t.tValue?n("i",{staticClass:"fas fa-check"}):t._e()])])},N=[],S={name:"CustomCheckbox",props:{value:{type:Boolean,default:!1},title:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{tValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}},$=S,j=(n("810b"),Object(r["a"])($,O,N,!1,null,null,null)),w=j.exports,I={name:"NoteCard",components:{IconButton:x,CustomCheckbox:w},props:{note:{type:Object,default:function(){}}},methods:{deleteNote:function(){confirm("Вы уверены, что хотите удалить заметку?")&&this.$store.commit("deleteNote",this.note.id)}}},H=I,V=(n("a80f"),Object(r["a"])(H,_,v,!1,null,null,null)),P=V.exports,T={name:"Index",components:{NoteCard:P},computed:{notes:function(){return this.$store.getters.getNoteList}}},A=T,E=(n("5485"),Object(r["a"])(A,m,h,!1,null,null,null)),J=E.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editing-page"},[n("span",{staticClass:"page-title"},[t._v(t._s(t.id?"Редактирование":"Создание")+" заметки")]),n("note-card",{attrs:{"note-id":t.id}})],1)},z=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"note",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[n("div",{staticClass:"note__manage-panel"},[n("div",{staticClass:"note__manage-panel-left"},[n("icon-button",{attrs:{"icon-class":"fas fa-arrow-left",title:"Вернуться на главную"},on:{click:t.cancel}})],1),n("div",{staticClass:"note__manage-panel-right"},[n("icon-button",{attrs:{"icon-class":"fas fa-undo",title:"Отменить последнее действие"},on:{click:t.undo}}),n("icon-button",{attrs:{"icon-class":"fas fa-redo",title:"Повторить отменённое действие"},on:{click:t.redo}}),t.noteId?n("icon-button",{attrs:{"icon-class":"fas fa-trash",title:"Удалить заметку",color:"error"},on:{click:t.deleteNote}}):t._e()],1)]),n("div",{staticClass:"note__title"},[n("span",{staticClass:"note__title-label"},[t._v("Название")]),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.note.title,expression:"note.title",modifiers:{lazy:!0}}],staticClass:"note__title-input",attrs:{required:"",type:"text",placeholder:"Введите название заметки*"},domProps:{value:t.note.title},on:{change:function(e){return t.$set(t.note,"title",e.target.value)}}})]),n("div",{staticClass:"note__tasks"},[n("span",{staticClass:"note__tasks-label"},[t._v("Задачи")]),0==t.note.tasks.length?n("div",{staticClass:"note__tasks-placeholder"},[t._v(" У заметки нет задач. "),n("button",{staticClass:"note__tasks-placeholder-add",on:{click:t.addTask}},[t._v("Нажмите, чтобы создать")])]):n("div",{staticClass:"note__tasks-container"},[t._l(t.note.tasks,(function(e,s){return n("div",{staticClass:"note__task"},[n("custom-checkbox",{model:{value:e.done,callback:function(n){t.$set(e,"done",n)},expression:"task.done"}}),n("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.title,expression:"task.title",modifiers:{lazy:!0}}],staticClass:"note__task-title",attrs:{required:"",type:"text",placeholder:"Текст задачи*"},domProps:{value:e.title},on:{change:function(n){return t.$set(e,"title",n.target.value)}}}),n("icon-button",{attrs:{title:"Удалить",color:"error","icon-class":"fas fa-times"},on:{click:function(e){return t.removeTask(s)}}})],1)})),n("div",{staticClass:"note__tasks-add"},[n("icon-button",{attrs:{title:"Добавить таск",color:"success","icon-class":"fas fa-plus"},on:{click:function(e){return t.addTask()}}})],1)],2)]),n("button",{staticClass:"note__submit",attrs:{type:"submit"}},[t._v(" Сохранить ")])])},M=[],q=(n("fb6a"),n("a9e3"),{name:"NoteCard",props:{noteId:{type:Number,default:0}},components:{IconButton:x,CustomCheckbox:w},data:function(){return{note:{title:"",tasks:[]},actionHistory:[],canceledActionHistory:[]}},mounted:function(){this.noteId?this.note=Object.assign({},this.$store.getters.getNote(this.noteId)):this.rememberState(this.note)},watch:{note:{deep:!0,handler:function(t){this.rememberState(t)}}},methods:{deleteNote:function(){confirm("Вы уверены, что хотите удалить заметку?")&&this.$store.commit("deleteNote",this.noteId)},cancel:function(){JSON.stringify(this.note)!=this.actionHistory[this.actionHistory.length-1]?confirm("Вы уверены? Изменения не сохранятся")&&this.$router.push({name:"index"}):this.$router.push({name:"index"})},rememberState:function(t){100==this.actionHistory.length&&this.actionHistory.pop(),this.actionHistory.unshift(JSON.stringify(t))},submit:function(){this.$store.commit("updateNoteList",{note:this.note,id:this.noteId||0}),this.$router.push({name:"index"})},addTask:function(){var t=this.note.tasks.slice();t.push({done:!1,title:""}),this.note.tasks=t},removeTask:function(t){this.note.tasks=this.note.tasks.filter((function(e,n){return t!=n}))},undo:function(){if(this.actionHistory.length>1){var t=this.actionHistory.shift();this.canceledActionHistory.unshift(t),t=this.actionHistory.shift(),this.note=Object.assign({},JSON.parse(t))}},redo:function(){if(this.canceledActionHistory.length>0){var t=this.canceledActionHistory.shift();this.note=Object.assign({},JSON.parse(t))}}}}),D=q,F=(n("b293"),Object(r["a"])(D,L,M,!1,null,null,null)),G=F.exports,K={name:"Editing",components:{NoteCard:G},data:function(){return{id:parseInt(this.$route.params["id"])||0}}},Q=K,R=Object(r["a"])(Q,B,z,!1,null,"59d00c0b",null),U=R.exports;s["a"].use(p["a"]);var W=[{name:"index",path:"/",component:J,meta:{title:"Все заметки"}},{name:"create",path:"/create",component:U,meta:{title:"Создать заметку"}},{name:"edit",path:"/:id",component:U,meta:{title:function(t){return f.getters.getNote(t).title}}}],X=new p["a"]({mode:"history",routes:W});X.beforeEach((function(t,e,n){t.params.id?document.title="".concat(t.meta.title(t.params.id)," | Todo"):document.title="".concat(t.meta.title," | Todo"),n()}));var Y=X;s["a"].config.productionTip=!1,new s["a"]({store:f,router:Y,render:function(t){return t(u)}}).$mount("#app")},"686c":function(t,e,n){},"72d1":function(t,e,n){},"810b":function(t,e,n){"use strict";var s=n("3411"),o=n.n(s);o.a},"87a4":function(t,e,n){"use strict";var s=n("72d1"),o=n.n(s);o.a},a80f:function(t,e,n){"use strict";var s=n("686c"),o=n.n(s);o.a},b293:function(t,e,n){"use strict";var s=n("4a58"),o=n.n(s);o.a},cf25:function(t,e,n){"use strict";var s=n("fea6"),o=n.n(s);o.a},fea6:function(t,e,n){}});
//# sourceMappingURL=app.05bd0e38.js.map